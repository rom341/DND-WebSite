{% extends "base.html" %}

{% block content %}
    <h2>This is the Battlefield Page</h2>
    <p>Prepare for battle!</p>
    <p>Here is a battle table</p>
    
    <table class="battle-table" style="border: 1px solid black; border-radius: 10px; table-layout: fixed;">
        {% for y in cols_range %}
        <tr>
            {% for x in rows_range %}
            <td style="border: 1px solid black; padding: 10px; text-align: center; border-radius: 10px;">
                {% for character in characters %}
                    {% if character.position_x == x and character.position_y == y %}
                        <p>{{ character.name }}</p>
                    {% endif %}
                {% endfor %}
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
   <div>
        <h3>Move Character</h3>
        <form method="post">
            {% csrf_token %}
            
            <label for="char-select">Character to Move:</label>
            <select name="character_to_move" id="char-select" required>
                <option value="">-- Select a character --</option>
                {% for char in characters %}
                    <option value="{{ char.id }}">{{ char.name }}</option>
                {% endfor %}
            </select>
            <br><br>

            {{ form.as_p }}
            
            <button type="submit">Move</button>
        </form>
    </div>

{% endblock %}